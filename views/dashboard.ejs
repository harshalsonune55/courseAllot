<div class="px-16 py-10">

  <!-- SEARCH -->
  <div class="mb-8">
    <input 
      type="text"
      placeholder="Search courses, faculty, allocations..."
      class="w-full border border-gray-300 rounded-xl px-6 py-4 focus:ring-2 focus:ring-blue-600 focus:outline-none"
    />
  </div>

  <!-- TITLE -->
  <h2 class="text-2xl font-bold text-gray-800 mb-8">
    AI Dashboard âœ¨
  </h2>

  <!-- ===================== -->
  <!-- STATS SECTION -->
  <!-- ===================== -->

  <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">

    <% if (data.stats) { %>

      <% Object.keys(data.stats).forEach(key => { %>

        <div class="bg-green-800 text-white p-6 rounded-2xl shadow-md">
          <p class="capitalize text-sm opacity-80">
            <%= key.replace(/([A-Z])/g, ' $1') %>
          </p>
          <h3 class="text-3xl font-bold mt-2">
            <%= data.stats[key] %>
          </h3>
        </div>

      <% }) %>

    <% } %>

  </div>


  <!-- ===================== -->
  <!-- AI RECOMMENDATIONS -->
  <!-- ===================== -->

  <div class="bg-white rounded-2xl p-8 shadow border border-gray-200">

    <h3 class="text-xl font-semibold mb-8 text-gray-800">
      AI Recommendations âœ¨
    </h3>

    <% if (data.recommendations && data.recommendations.length > 0) { %>

      <% data.recommendations.forEach(course => { 

          // ðŸ”¥ Check if this course has a real request
          const realRequest = data.requests.find(r => r.courseName === course.course);
      %>

        <div class="bg-gray-50 p-6 rounded-xl flex justify-between items-center mb-6 border">

          <div>
            <p class="font-medium text-gray-800 text-lg">
              <%= course.course %>
            </p>

            <p class="text-green-700 text-sm mt-1">
              AI Match: <%= course.score %>%
            </p>
          </div>

          <% if (realRequest) { %>

              <% if (realRequest.status === "APPROVED") { %>
                <span class="bg-green-700 text-white px-4 py-2 rounded-full text-sm">
                  APPROVED
                </span>
              <% } else if (realRequest.status === "REJECTED") { %>
                <span class="bg-red-600 text-white px-4 py-2 rounded-full text-sm">
                  REJECTED
                </span>
              <% } else { %>
                <span class="bg-gray-900 text-white px-4 py-2 rounded-full text-sm">
                  PENDING
                </span>
              <% } %>

          <% } else { %>

              <span class="bg-blue-900 text-white px-4 py-2 rounded-full text-sm">
                NOT REQUESTED
              </span>

          <% } %>

        </div>

      <% }) %>

    <% } else { %>

      <div class="bg-yellow-50 border border-yellow-200 text-yellow-900 p-6 rounded-xl">
        No AI recommendations available yet. Please upload your CV.
      </div>

    <% } %>

  </div>

</div>
